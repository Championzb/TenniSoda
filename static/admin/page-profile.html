{% extends "index-base.html" %}
{% load static %}
{% block title %}
    <title>我的主页 &middot; TenniSoda</title>
{% endblock %}
{% block head %}
<script>
    function checkProfile(){
        {% if profile.last_name and profile.first_name and profile.phone %}
            window.location = "/game/find_game/";
        {% else %}
            alert("Please provide your name and phone first!");
            window.location = "/account/change_profile/";
        {% endif %}
    }
</script>
{% endblock %}
{% block profileimg %}
    {% if profile.picture %}
      <img src="{% get_static_prefix %}assets/{{profile.picture.url}}" class="navbar-profile-avatar" alt="" />
    {% else %}
      <img src="{% static "assets/uploaded_files/default.jpg" %}" class="navbar-profile-avatar" alt="" />
    {% endif %}
{% endblock %}
{% block profile %}
<li class="dropdown active">
<a href="/account/welcome_user/">
    <i class="fa fa-user"></i>
    我的主页
</a>
</li>
{% endblock %}

{% block content %}
  <div class="content">

    <div class="container">

      <div class="row">

        <div class="col-md-3 col-sm-5">

          <div class="profile-avatar">
            {% if profile.picture %}
                <img src="{% get_static_prefix %}assets/{{profile.picture.url}}" class="profile-avatar-img thumbnail" alt="Profile Image">
            {% else %}
                <img src="{% static "assets/uploaded_files/default.jpg" %}" class="profile-avatar-img thumbnail" alt="Profile Image">
            {% endif %}
          </div> <!-- /.profile-avatar -->

		{% block list_group %}
          <div class="list-group">  

            <a href="javascript:;" class="list-group-item active">
              <i class="fa fa-asterisk text-primary"></i> &nbsp;&nbsp;Activity Feed

              <i class="fa fa-chevron-right list-group-chevron"></i>
            </a>

            <a href="/account/get_followers/{{profile.user_id}}/" class="list-group-item">
              <i class="fa fa-envelope text-primary"></i> &nbsp;&nbsp;粉丝

              <i class="fa fa-chevron-right list-group-chevron"></i>
            </a> 

            <a href="/account/get_following/{{profile.user_id}}/" class="list-group-item">
              <i class="fa fa-group text-primary"></i> &nbsp;&nbsp;关注

              <i class="fa fa-chevron-right list-group-chevron"></i>
            </a> 

            <a href="/account/change_profile/" class="list-group-item">
              <i class="fa fa-cog text-primary"></i> &nbsp;&nbsp;修改设置

              <i class="fa fa-chevron-right list-group-chevron"></i>
            </a> 
          </div> <!-- /.list-group -->
		{% endblock %}


        </div> <!-- /.col -->



        <div class="col-md-6 col-sm-7">

          <h3>{{ profile }}</h3>

          <h5 class="text-muted">Ladder points: XXXX</h5>
          
          <ul class="icons-list">
            <li><i class="icon-li fa fa-map-marker"></i> {{ profile.city }}</li>
          </ul>    

          <hr>

			{% block subcontent %}
          <h4 class="content-title"><u>Coming game</u></h4>

          <ul class="icons-list notifications-list">
            <li>
              <i class="icon-li fa fa-eye text-secondary"></i>
              <a href="javascript:;">You</a> watched the project <a href="javascript:;">MVP Ready Development</a>
            </li>
          </ul>

          <br><br>
		  
          <h4 class="content-title"><u>Activity Feed</u></h4>

            <br><br>
			{% for activity in activities %}
			{% ifequal activity.type 1 %}
            <div class="feed-item feed-item-idea">

              <div class="feed-icon">
                <i class="fa fa-lightbulb-o"></i>
              </div> <!-- /.feed-icon -->

              <div class="feed-subject">
                <p><a href="javascript:;">{{activity.creator}}</a>发布了约球小组</p>
              </div> <!-- /.feed-subject -->

              <div class="feed-content">
                <ul class="icons-list">
                  <li>
                  		该小组地点为{{activity.game_group.court}}, 开始于{{activity.game_group.start_time}}, 持续{{activity.game_group.last_hour}}小时, 价格为每小时{{activity.game_group.price}}                     
                  </li>
                </ul>
              </div> <!-- /.feed-content -->

              <div class="feed-actions">
                <a href="/activity/like/{{activity.id}}" class="pull-left"><i class="fa fa-thumbs-up"></i>{{activity.like_num}}</a>
                

                <a href="" class="pull-right disabled"><i class="fa fa-clock-o"></i>{{activity.date_time}}</a> 
				</div> <!-- /.feed-actions -->

            </div> <!-- /.feed-item -->
			{% endifequal %}
			{% ifequal activity.type 2 %}

			{% endifequal %}
			{% ifequal activity.tpye 3 %}

			{% endifequal %}
			{% endfor %}
            <br class="visible-xs">
            <br class="visible-xs">
			{% endblock %}
          </div> <!-- /.col -->


          <div class="col-sm-4 col-md-3 layout-sidebar">
          <div class="portlet">
            <!-- button class="btn btn-primary btn-jumbo btn-block" onclick="checkProfile()">Ladder Games</button-->
            <!--<a class="btn btn-primary btn-jumbo btn-block" onclick="checkProfile()">Ladder Game</a>-->
            <a href="/game/game_group/" class="btn btn-primary btn-jumbo btn-block">约&nbsp;&nbsp;球</a>
            <br>
            <a href="/game/all_league/" class="btn btn-secondary btn-lg btn-block ">查看联赛</a>
          </div> <!-- /.portlet -->

            <h5 class="content-title"><u>个人数据</u></h5>

            <div class="list-group">  

              <a href="javascript:;" class="list-group-item">
                <h3 class="pull-right"><i class="fa fa-eye text-primary"></i></h3>
                <h4 class="list-group-item-heading">{{ followers_count }}</h4>
                <p class="list-group-item-text">粉丝</p>
              </a>

              <a href="javascript:;" class="list-group-item">
                <h3 class="pull-right"><i class="fa fa-eye text-primary"></i></h3>
                <h4 class="list-group-item-heading">{{ following_count }}</h4>
                <p class="list-group-item-text">关注</p>
              </a>

              <a href="javascript:;" class="list-group-item">
                <h3 class="pull-right"><i class="fa fa-eye text-primary"></i></h3>
                <h4 class="list-group-item-heading">{{ games_win_count }}</h4>
                <p class="list-group-item-text">胜场</p>
              </a>

              <a href="javascript:;" class="list-group-item">
                <h3 class="pull-right"><i class="fa fa-facebook-square  text-primary"></i></h3>
                <h4 class="list-group-item-heading">{{games_count}}</h4>
                <p class="list-group-item-text">总场数</p>
              </a>

            </div> <!-- /.list-group -->

            <br>

          </div> <!-- /.col -->

        </div> <!-- /.row -->

        <br><br>
    </div> <!-- /.container -->

  </div> <!-- .content -->

{% endblock %}
